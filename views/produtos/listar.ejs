<%- include('../includes/header.ejs', { titulo: 'Lista de Produtos' }) %>

<main class="p-6 min-h-screen">
  <div class="flex justify-between items-center mb-6">
    <a
      href="/produtos/novo"
      class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"
    >
      + Novo Produto
    </a>
  </div>

  <% if (produtos.length === 0) { %>
    <p class="text-gray-500 text-center mt-10">Nenhum produto cadastrado ainda.</p>
  <% } else { %>
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <% for (let produto of produtos) { %>
        <div class="bg-white shadow-md rounded-2xl p-5 flex flex-col justify-between">
          <div>
            <h2 class="text-xl font-semibold text-gray-800 mb-2"><%= produto.nome %></h2>
            <p class="text-sm text-gray-600 mb-2"><%= produto.descricao || 'Sem descrição' %></p>
            <p class="text-sm text-gray-700 font-medium mb-1">
              Preço: <span class="text-green-700">R$ <%= produto.valor_custo %></span>
            </p>
            <p class="text-sm text-gray-700 font-medium mb-1">
              Estoque: <span class="text-green-700"><%= produto.quantidade %></span>
            </p>
          </div>

          <div class="#1mjcm6l #16nef5u #t45iz0 #rpta5x">
            <a
              href="/produtos/<%= produto.id_produto %>/editar"
              class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"
            >
              Editar
            </a>

            <form
              action="/produtos/<%= produto.id_produto %>/deletar"
              method="POST"
              onsubmit="return confirm('Tem certeza que deseja excluir este produto?')"
            >
              <button
                type="submit"
                class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition"
              >
              Excluir
              </button>
            </form>
          </div>
        </div>
      <% } %>
    </div>
  <% } %>
</main>

<%- include('../includes/footer.ejs') %>