<%- include('../includes/header.ejs', { titulo: 'Lista de Produtos' }) %>

<main class="p-6 min-h-screen">

  <% if (produtos.length === 0) { %>
    <p class="text-gray-500 text-center mt-10">Nenhum produto cadastrado ainda.</p>
  <% } else { %>
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <% for (let produto of produtos) { %>
        <div class="bg-white shadow-md rounded-2xl p-5 flex flex-col justify-between">
          <div>
            <h2 class="text-xl font-semibold text-gray-800 mb-2"><%= produto.nome %></h2>
            <p class="text-sm text-gray-600 mb-2"><%= produto.descricao || 'Sem descrição' %></p>
            <p class="text-sm text-gray-700 font-medium mb-1">
              Preço: <span class="text-green-700">R$ <%= produto.valor_custo %></span>
            </p>
            <p class="text-sm text-gray-700 font-medium mb-1">
              Estoque: <span class="text-green-700"><%= produto.quantidade %></span>
            </p>
          </div>

          <div class="mt-4 flex justify-end space-x-3"> 
            <a
              href="/produtos/<%= produto.id_produto %>/editar"
            >
              <button type="submit"
                      title="Editar categoria"
                      class="bg-green-600 hover:bg-sucesso-700 p-2 rounded-full shadow flex items-center justify-center transition-transform hover:scale-110">
              <img src="/img/edit.svg" alt="Editar" class="w-4 h-4 md:w-5 md:h-5">
            </button>
            </a>
            
            <form
              action="/produtos/<%= produto.id_produto %>/deletar"
              method="POST"
              onsubmit="return confirm('Tem certeza que deseja excluir este produto?')"
            >
              <button type="submit" title="Excluir produto"
                      class="bg-red-600 hover:bg-erro-700 text-white p-2 rounded-full shadow flex items-center justify-center transition-transform hover:scale-110">
                <img src="/img/delete.svg" alt="Deletar" class="w-4 h-4 md:w-5 md:h-5">
              </button>
            </form>
          </div>
          </div>
      <% } %>
    </div>
            <a href="/produtos/novo" aria-label="Adicionar produto" title="Adicionar novo produto" class="fixed right-6 bottom-24 md:bottom-8 z-50
            bg-green-500 w-14 h-14 rounded-full bg-gradient-to-b from-sistema-500 to-sistema-700 text-white
            flex items-center justify-center shadow-lg
            hover:shadow-xl hover:scale-110 transition-all duration-300
            focus:outline-none focus:ring-4 focus:ring-white/50">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor">
            <path d="M11 5a1 1 0 1 1 2 0v6h6a1 1 0 1 1 0 2h-6v6a1 1 0 1 1-2 0v-6H5a1 1 0 1 1 0-2h6V5z" />
          </svg>
        </a>
  <% } %>
</main>

<%- include('../includes/footer.ejs') %>