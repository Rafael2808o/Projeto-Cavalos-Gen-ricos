<%- include('../includes/header.ejs', { titulo: 'Cadastrar Produto' }) %>

<main class="p-4 md:p-6 bg-neutra-50 min-h-screen flex items-center justify-center">
  <div class="bg-white rounded-xl shadow-xl border border-gray-200 p-8 w-full max-w-2xl">
    <h2 class="text-2xl font-bold text-sistema-700 text-center mb-8 flex items-center justify-center gap-3">
      Cadastrar Suplemento Equino
    </h2>

    <% if (typeof mensagem !== 'undefined' && mensagem) { %>
      <div class="mb-6 p-4 rounded-lg text-sm border
        <%= mensagem.includes('sucesso') || mensagem.includes('cadastrado') ? 'bg-green-50 border-green-200 text-green-800' : 'bg-red-50 border-red-200 text-red-700' %>">
        <%= mensagem %>
      </div>
    <% } %>

    <form action="/produtos/novo" method="POST" class="space-y-6">

      <div class="grid md:grid-cols-2 gap-6">

        <div>
          <label for="nome" class="block text-sm font-medium text-gray-700 mb-2">
            Nome do Produto
          </label>
          <input
            type="text"
            id="nome"
            name="nome"
            required
            placeholder="Ex: Suplemento Proteico Cavalo Forte"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow"
          />
        </div>

        <div>
          <label for="id_categoria" class="block text-sm font-medium text-gray-700 mb-2">
            Categoria
          </label>
          <select
            id="id_categoria"
            name="id_categoria"
            required
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow"
          >
            <option value="">Selecione uma categoria</option>
            <% categorias.forEach(cat => { %>
              <option value="<%= cat.id_categoria %>"><%= cat.nome_categoria %></option>
            <% }) %>
          </select>
        </div>
      </div>


      <div>
        <label for="descricao" class="block text-sm font-medium text-gray-700 mb-2">
          Descrição do Produto
        </label>
        <textarea
          id="descricao"
          name="descricao"
          rows="4"
          placeholder="Descreva os benefícios, composição, modo de uso..."
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow resize-none"
        ></textarea>
      </div>

      <div class="grid md:grid-cols-3 gap-6">

        <div>
          <label for="valor_custo" class="block text-sm font-medium text-gray-700 mb-2">
            Preço de Custo (R$)
          </label>
          <input
            type="number"
            step="0.01"
            id="valor_custo"
            name="valor_custo"
            required
            placeholder="89.90"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow"
          />
        </div>


        <div>
          <label for="estoque_minimo" class="block text-sm font-medium text-gray-700 mb-2">
            Estoque Mínimo
          </label>
          <input
            type="number"
            id="estoque_minimo"
            name="estoque_minimo"
            required
            placeholder="20"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow"
          />
        </div>


        <div>
          <label for="data_cadastro" class="block text-sm font-medium text-gray-700 mb-2">
            Data de Cadastro
          </label>
          <input
            type="date"
            id="data_cadastro"
            name="data_cadastro"
            required
            value="<%= new Date().toISOString().split('T')[0] %>"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow"
          />
        </div>
      </div>

      <div class="grid md:grid-cols-2 gap-6">

        <div>
          <label for="imagem" class="block text-sm font-medium text-gray-700 mb-2">
            URL da Imagem
          </label>
          <input
            type="url"
            id="imagem"
            name="imagem"
            required
            placeholder="https://exemplo.com/imagem.jpg"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sistema-500 focus:border-sistema-500 outline-none transition-shadow"
          />
        </div>

        <div>
          <label for="quantidade" class="block text-sm font-medium text-gray-700 mb-2">
            Quantidade Estoque
          </label>
          <input
            type="number"
            id="quantidade"
            name="quantidade"
            value="0"
            readonly
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed"
          />
        </div>
      </div>

      <div class="flex justify-end gap-4 pt-6 border-t border-gray-200 mt-8">
        <a
          href="/produtos"
          class="px-6 py-2.5 bg-gray-500 hover:bg-gray-600 text-white font-medium rounded-lg transition-colors duration-200"
        >
          Cancelar
        </a>
        <button
          type="submit"
          class="px-6 py-2.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg flex items-center gap-2"
        >
          Cadastrar Produto
        </button>
      </div>
    </form>
  </div>
</main>

<%- include('../includes/footer.ejs') %>